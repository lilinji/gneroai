---
title: ğŸ’  R ä½¿ç”¨æ–¹æ³•
sidebar_position: 2
description: >-
  Learn to use R for statistical computing and data analysis on the HPC cluster.
---

# ğŸ’  R ä½¿ç”¨æ–¹æ³•

R è¯­è¨€æ˜¯ä¸€ç§ä¸“ä¸ºç»Ÿè®¡åˆ†æã€æ•°æ®æŒ–æ˜å’Œå¯è§†åŒ–è®¾è®¡çš„é«˜çº§ç¼–ç¨‹è¯­è¨€ï¼Œå¹¿æ³›åº”ç”¨äºç§‘ç ”ã€é‡‘èã€ç”Ÿç‰©ä¿¡æ¯ç­‰é¢†åŸŸã€‚R åœ¨ HPC é›†ç¾¤ä¸Šå¯ç”¨äºå¤§è§„æ¨¡æ•°æ®åˆ†æã€å¹¶è¡Œè®¡ç®—å’Œè‡ªåŠ¨åŒ–æ‰¹é‡ä»»åŠ¡ã€‚

---

## ç›®å½•
- [R è¯­è¨€ç®€ä»‹](#r-è¯­è¨€ç®€ä»‹)
- [ç¯å¢ƒå‡†å¤‡](#ç¯å¢ƒå‡†å¤‡)
- [äº¤äº’å¼ä½œä¸š](#äº¤äº’å¼ä½œä¸š)
- [æ‰¹é‡ä½œä¸šä¸è„šæœ¬](#æ‰¹é‡ä½œä¸šä¸è„šæœ¬)
- [å¸¸è§é—®é¢˜ä¸æ’æŸ¥](#å¸¸è§é—®é¢˜ä¸æ’æŸ¥)
- [å‚è€ƒèµ„æ–™](#å‚è€ƒèµ„æ–™)
- [åŠ¨ç”»æ¼”ç¤º](#åŠ¨ç”»æ¼”ç¤º)

---

## R è¯­è¨€ç®€ä»‹

- **R** æ˜¯ä¸€ç§è§£é‡Šå‹è¯­è¨€ï¼Œè¯­æ³•çµæ´»ï¼Œå†…ç½®ä¸°å¯Œçš„ç»Ÿè®¡å’Œç»˜å›¾å‡½æ•°ã€‚
- æ”¯æŒå¤šç§æ•°æ®ç»“æ„ï¼ˆå‘é‡ã€çŸ©é˜µã€æ•°æ®æ¡†ã€åˆ—è¡¨ç­‰ï¼‰ï¼Œä¾¿äºæ•°æ®å¤„ç†ã€‚
- æ‹¥æœ‰åºå¤§çš„ç¤¾åŒºå’ŒåŒ…ç”Ÿæ€ï¼ˆCRANã€Bioconductorï¼‰ã€‚
- åœ¨é›†ç¾¤ç¯å¢ƒä¸‹ï¼ŒR å¯ç»“åˆå¹¶è¡ŒåŒ…ï¼ˆå¦‚ parallelã€foreachã€snowï¼‰å®ç°å¤šæ ¸/å¤šèŠ‚ç‚¹è®¡ç®—ã€‚

---

## ç¯å¢ƒå‡†å¤‡

1. **èµ„æºç”³è¯·ï¼ˆä»¥ Slurm ä¸ºä¾‹ï¼‰**

ç”³è¯· 1 ä¸ªèŠ‚ç‚¹ï¼Œ8 ä¸ª CPUï¼Œ16GB å†…å­˜ï¼Œä½œä¸šæœ€é•¿ 5 åˆ†é’Ÿï¼š

```bash
salloc -N 1 --cpus-per-task=8 --mem=16G -t 5:00 -p qcpu_18i
```

ç­‰å¾…åˆ†é…åï¼Œç³»ç»Ÿä¼šæç¤ºå¯ç™»å½•èŠ‚ç‚¹ï¼ˆå¦‚ bnode1ï¼‰ï¼š

```bash
ssh bnode1
```

2. **åŠ è½½ R æ¨¡å—**

```bash
module load R
```

3. **è¿›å…¥ R ç»ˆç«¯**

```bash
R
```

4. **æ‰§è¡Œ R è¯­å¥ç¤ºä¾‹**

```r
> print(1+2)
[1] 3
> x <- rnorm(1000)
> summary(x)
```

---

## äº¤äº’å¼ä½œä¸š

é€‚ç”¨äºè°ƒè¯•ã€æ•°æ®æ¢ç´¢ã€å¯è§†åŒ–ç­‰åœºæ™¯ã€‚

```bash
# ç”³è¯·èµ„æºå¹¶è¿›å…¥èŠ‚ç‚¹
salloc -N 1 --cpus-per-task=4 --mem=8G -t 30:00 -p qcpu_18i
ssh bnode1
module load R
R
```

åœ¨ R ç»ˆç«¯å¯ç›´æ¥è¿è¡Œåˆ†æä»£ç ã€ç»˜å›¾ç­‰ã€‚

---

## æ‰¹é‡ä½œä¸šä¸è„šæœ¬

é€‚ç”¨äºå¤§è§„æ¨¡è®¡ç®—ã€è‡ªåŠ¨åŒ–åˆ†æã€‚

1. **ç¼–å†™ R è„šæœ¬ï¼ˆå¦‚ myjob.Rï¼‰**

```r
# myjob.R
x <- rnorm(1e7)
cat("Mean:", mean(x), "\n")
```

2. **ç¼–å†™ Slurm ä½œä¸šè„šæœ¬ï¼ˆå¦‚ myjob.slurmï¼‰**

```bash
#!/bin/bash
#SBATCH --job-name=rjob
#SBATCH --partition=qcpu_18i
#SBATCH --ntasks=1
#SBATCH --cpus-per-task=4
#SBATCH --mem=8G
#SBATCH --time=00:10:00
#SBATCH --output=%j.out
#SBATCH --error=%j.err

module load R
Rscript myjob.R
```

3. **æäº¤ä½œä¸š**

```bash
sbatch myjob.slurm
```

4. **æŸ¥çœ‹è¾“å‡º**

```bash
cat <jobid>.out
```

---

## åŠ¨ç”»æ¼”ç¤º

![R.gif](/static/guides/hpc/software-applications/R.gif)

---

## å¸¸è§é—®é¢˜ä¸æ’æŸ¥

### 1. R æ— æ³•å¯åŠ¨/æ‰¾ä¸åˆ°å‘½ä»¤
- æ£€æŸ¥æ˜¯å¦å·²åŠ è½½ R æ¨¡å—ï¼ˆ`module load R`ï¼‰
- æ£€æŸ¥ PATH ç¯å¢ƒå˜é‡

### 2. ä½œä¸šå†…å­˜ä¸è¶³/è¶…æ—¶
- å¢å¤§ `--mem` æˆ– `--time` å‚æ•°
- ä¼˜åŒ– R è„šæœ¬å†…å­˜ä½¿ç”¨

### 3. R åŒ…å®‰è£…å¤±è´¥
- æ£€æŸ¥ç½‘ç»œã€æƒé™ï¼Œå»ºè®®ä½¿ç”¨ä¸ªäººç›®å½•å®‰è£…åŒ…ï¼ˆå¦‚ `install.packages('ggplot2', lib='~/Rlibs')`ï¼‰
- å¦‚éœ€ Bioconductor åŒ…ï¼Œä½¿ç”¨ `BiocManager::install()`

### 4. å¹¶è¡Œè®¡ç®—æ…¢
- æ£€æŸ¥å¹¶è¡ŒåŒ…æ˜¯å¦æ­£ç¡®è°ƒç”¨
- åˆç†åˆ†é… `--cpus-per-task`ï¼Œå¹¶åœ¨ R è„šæœ¬ä¸­è®¾ç½®å¹¶è¡Œå‚æ•°

---

## å‚è€ƒèµ„æ–™
- [R å®˜æ–¹æ–‡æ¡£](https://cran.r-project.org/manuals.html)
- [Bioconductor](https://www.bioconductor.org/)
- [Slurm å®˜æ–¹æ–‡æ¡£](https://slurm.schedmd.com/documentation.html)
- [HPC R Best Practices (NERSC)](https://docs.nersc.gov/applications/r/)

---

<head>
  <title>R é›†ç¾¤ä½¿ç”¨æ–¹æ³• Guide</title>
  <meta
    name="description"
    content="Learn to use R for statistical computing and data analysis on the HPC cluster."
  />
</head> 